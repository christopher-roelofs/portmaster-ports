<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="module" src="https://md-block.verou.me/md-block.js"></script>
    <title>Port Details</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            display: flex;
            justify-content: center;
            /* Center the contents horizontally */
            align-items: center;
         
        }

        h1 {
            margin-top: 0;
            text-align: center;
        }


        p {
            margin-bottom: 0;
            text-align: center;
        }

        a {
            margin-bottom: 0;
            text-align: center;
        }
        
        img {
            max-width: 100%;
            display: block;
            margin: 0 auto;
        }


        /* Additional styles for larger screens if necessary */
        @media screen and (min-width: 768px) {
            /* Add any additional styles for larger screens here */
        }
    </style>
</head>


<body>
    <h3><a href="wiki.html">Back</a> </h3>
    <div id="details-container"></div>

    <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Function to display card details
        function displayCardDetails(data) {
            const detailsContainer = document.getElementById('details-container');

            const titleElement = document.createElement('h1');
            titleElement.textContent = data.attr.title;


            const imageElement = document.createElement("img");
            imageElement.src = "https://raw.githubusercontent.com/christianhaitian/PortMaster/main/" + data.attr.image.screenshot;
            imageElement.className = "card-img"

            const contentElement = document.createElement('p');
            contentElement.textContent = "Description: " + data.attr.desc;

            const instructionElement = document.createElement('p');
            instructionElement.textContent = "Instructions: " + (data.attr.inst ?? '');

            const genreElement = document.createElement('p');
            genreElement.textContent = "Genres: " + data.attr.genres.join();

            const runtimeElement = document.createElement('p');
            runtimeElement.textContent = "Runtime: " + (data.attr.runtime ?? 'None');

            const requirementsElement = document.createElement('p');
            requirementsElement.textContent = "Requirements: " + (data.attr.reqs.join(","));

            const porterElement = document.createElement("p");
            porterElement.textContent = "Porter: " + data.attr.porter;

            const fileElement = document.createElement("a");
            fileElement.textContent = data.source;
            fileElement.setAttribute("href","https://github.com/christianhaitian/PortMaster/raw/main/" + data.source);

            const markdownElement = document.createElement("md-block");
            markdownElement.setAttribute("src","https://raw.githubusercontent.com/christopher-roelofs/portmaster-ports/main/wiki/" + data.source.toLowerCase().replace("zip","md"));

            detailsContainer.appendChild(titleElement);
            detailsContainer.appendChild(imageElement);
            detailsContainer.appendChild(contentElement);
            detailsContainer.appendChild(instructionElement);
            detailsContainer.appendChild(runtimeElement);
            detailsContainer.appendChild(genreElement);
            detailsContainer.appendChild(requirementsElement);
            detailsContainer.appendChild(porterElement);
            detailsContainer.appendChild(fileElement);
            detailsContainer.appendChild(markdownElement);

        }

        // Fetch JSON data from the URL and display card details
        async function fetchDataAndDisplayDetails() {
            try {
                const title = getUrlParameter('title');
                const response = await fetch('https://raw.githubusercontent.com/kloptops/pugwash/main/pugwash/data/ports.json'); // Replace 'YOUR_JSON_URL_HERE' with the actual URL of your JSON data.
                if (!response.ok) {
                    throw new Error('Network response was not ok.');
                }
                var jsonData = await response.json();
                jsonData = jsonData.ports;
                var card = null;

                for (var key of Object.keys(jsonData)) {
                    if(jsonData[key].attr.title === title){
                        card = jsonData[key];
                    }
                };
                

                if (card) {
                    displayCardDetails(card);
                } else {
                    const detailsContainer = document.getElementById('details-container');
                    const notFoundElement = document.createElement('p');
                    notFoundElement.textContent = 'Card not found.';
                    detailsContainer.appendChild(notFoundElement);
                }
            } catch (error) {
                console.error('Error fetching JSON data:', error);
            }
        }

        // Call the fetchDataAndDisplayDetails function when the page is loaded
        window.onload = fetchDataAndDisplayDetails;
    </script>
</body>

</html>